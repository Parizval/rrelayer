# Getting started

[viem](https://viem.sh/docs/getting-started) is a simple and easy to use library for interacting with the any EVM blockchain.
If you are use to `viem` then this will look very familiar to you.

To integrate the relayer within your application with just a few code changes you can start using the relayer to send transactions, write to contracts, sign messages and typed data.

## Installation

Lets install both `viem` and `rrelayerr-ts`

:::code-group

```bash [npm]
npm i rrelayerr-ts viem
```

```bash [pnpm]
pnpm i rrelayerr-ts viem
```

```bash [bun]
bun i rrelayerr-ts viem
```

:::

## Creating wallet client

The rrelayerr client exposes ways for you to create an relayer client which exposes a ethereum provider you can use with `viem`.

```ts
import { createWalletClient, custom } from 'viem';
import { createRRelayerrClient } from 'rrelayerr-ts';

const client = createRRelayerrClient({
  // This is where the rrelayerr server is hosted
  serverUrl: 'http://127.0.0.1:8000',
  // This is your API secret access key you can have many
  // of these but you generate them within the server itself
  apiSecretAccessKey: 'INSERT_API_SECRET',
});

const relayer = await client.createRelayerClient({
  // The relayer ID you want to connect to
  relayerId: 'b12be8a1-7e95-4a5c-b46a-fbd124ee5771',
  // The api key for that relayer ID
  apiKey: 'API_KEY',
});

// viem wallet client to now allow signing as we injected rrelayerr provider
const walletClient = createWalletClient({
  transport: custom(relayer.ethereumProvider()),
});

// address of the relayer
const [account] = await walletClient.getAddresses();
```

## Sign text

You can sign text with the relayer

:::code-group

```ts [example]
import { account, walletClient } from './config';

const message = await walletClient.signMessage({
  account,
  message: 'sign me!',
});
```

```ts [config]
import { createWalletClient, custom } from 'viem';
import { createRRelayerrClient } from 'rrelayerr-ts';

const client = createRRelayerrClient({
  // This is where the rrelayerr server is hosted
  serverUrl: 'http://127.0.0.1:8000',
  // This is your API secret access key you can have many
  // of these but you generate them within the server itself
  apiSecretAccessKey: 'INSERT_API_SECRET',
});

const relayer = await client.createRelayerClient({
  // The relayer ID you want to connect to
  relayerId: 'b12be8a1-7e95-4a5c-b46a-fbd124ee5771',
  // The api key for that relayer ID
  apiKey: 'API_KEY',
});

export const walletClient = createWalletClient({
  transport: custom(relayer.ethereumProvider()),
});

export const [account] = await walletClient.getAddresses();
```

:::

## Sign typed data

You can sign typed data with the relayer

:::code-group

```ts [example]
import { account, walletClient } from './config';

const signature = await walletClient.signTypedData({
  account,
  domain: {
    name: 'Ether Mail',
    version: '1',
    chainId: 1,
    verifyingContract: '0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC',
  },
  types: {
    Person: [
      { name: 'name', type: 'string' },
      { name: 'wallet', type: 'address' },
    ],
    Mail: [
      { name: 'from', type: 'Person' },
      { name: 'to', type: 'Person' },
      { name: 'contents', type: 'string' },
    ],
  },
  primaryType: 'Mail',
  message: {
    from: {
      name: 'Cow',
      wallet: '0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826',
    },
    to: {
      name: 'Bob',
      wallet: '0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB',
    },
    contents: 'Hello, Bob!',
  },
});
```

```ts [config]
import { createWalletClient, custom } from 'viem';
import { createRRelayerrClient } from 'rrelayerr-ts';

const client = createRRelayerrClient({
  // This is where the rrelayerr server is hosted
  serverUrl: 'http://127.0.0.1:8000',
  // This is your API secret access key you can have many
  // of these but you generate them within the server itself
  apiSecretAccessKey: 'INSERT_API_SECRET',
});

const relayer = await client.createRelayerClient({
  // The relayer ID you want to connect to
  relayerId: 'b12be8a1-7e95-4a5c-b46a-fbd124ee5771',
  // The api key for that relayer ID
  apiKey: 'API_KEY',
});

export const walletClient = createWalletClient({
  transport: custom(relayer.ethereumProvider()),
});

export const [account] = await walletClient.getAddresses();
```

:::

## Send transaction

Send a transaction with the relayer

:::code-group

```ts [example]
import { account, walletClient } from './config';

const hash = await walletClient.sendTransaction({
  account,
  to: '0x70997970c51812dc3a010c7d01b50e0d17dc79c8',
  value: 1000000000000000000n,
});
```

```ts [config]
import { createWalletClient, custom } from 'viem';
import { createRRelayerrClient } from 'rrelayerr-ts';

const client = createRRelayerrClient({
  // This is where the rrelayerr server is hosted
  serverUrl: 'http://127.0.0.1:8000',
  // This is your API secret access key you can have many
  // of these but you generate them within the server itself
  apiSecretAccessKey: 'INSERT_API_SECRET',
});

const relayer = await client.createRelayerClient({
  // The relayer ID you want to connect to
  relayerId: 'b12be8a1-7e95-4a5c-b46a-fbd124ee5771',
  // The api key for that relayer ID
  apiKey: 'API_KEY',
});

export const walletClient = createWalletClient({
  transport: custom(relayer.ethereumProvider()),
});

export const [account] = await walletClient.getAddresses();
```

:::

## Write contract

Write a contract with the relayer

:::code-group

```ts [example]
import { account, publicClient, walletClient } from './config';
import { wagmiAbi } from './abi';

const { request } = await publicClient.simulateContract({
  account,
  address: '0xFBA3912Ca04dd458c843e2EE08967fC04f3579c2',
  abi: wagmiAbi,
  functionName: 'mint',
});
await walletClient.writeContract(request);
```

```ts [abi]
export const wagmiAbi = [
  ...
  {
    inputs: [],
    name: "mint",
    outputs: [],
    stateMutability: "nonpayable",
    type: "function",
  },
  ...
] as const;
```

```ts [config]
import { createWalletClient, createPublicClient, custom } from 'viem';
import { createRRelayerrClient } from 'rrelayerr-ts';

const client = createRRelayerrClient({
  // This is where the rrelayerr server is hosted
  serverUrl: 'http://127.0.0.1:8000',
  // This is your API secret access key you can have many
  // of these but you generate them within the server itself
  apiSecretAccessKey: 'INSERT_API_SECRET',
});

const relayer = await client.createRelayerClient({
  // The relayer ID you want to connect to
  relayerId: 'b12be8a1-7e95-4a5c-b46a-fbd124ee5771',
  // The api key for that relayer ID
  apiKey: 'API_KEY',
});

export const publicClient = createPublicClient({
  transport: http('NODE_URL'),
});

export const walletClient = createWalletClient({
  transport: custom(relayer.ethereumProvider()),
});

export const [account] = await walletClient.getAddresses();
```

:::
