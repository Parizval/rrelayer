# Sign

Sign-related SDK call.

## Sign Text Message

:::info
If your already using viem or ethers you can use the framework guides to integrate rrelayer.
[viem](/integration/sdk/framework-guides/typescript/viem) and [ethers](/integration/sdk/framework-guides/typescript/ethers).
:::

:::info
Basic auth can sign text with all relayers, and API keys can only sign text with the relayer
they have permission to use.
:::

Sign text message with the relayer.

### Response

```ts
Promise<SignTextResult>;
```

Just so you understand the properties returned

```ts
export interface SignTextResult {
  messageSigned: string;
  signature: string;
  signedBy: `0x${string}`;
}
```

### Basic Auth

```ts
// config.ts
import { createClient } from 'rrelayer';
import * as dotenv from "dotenv";
dotenv.config();

const client = createClient({
  serverUrl: 'http://localhost:8000',
  auth: {
    username: process.env.RRELAYER_AUTH_USERNAME!,
    password: process.env.RRELAYER_AUTH_PASSWORD!,
  },
});

export const relayerClient = await client.getRelayerClient(
  // The relayer id you want to connect to
  '94afb207-bb47-4392-9229-ba87e4d783cb',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  TransactionSpeed.FAST
);

...

// sign-text.ts
import { relayerClient } from './config';

// Using a framework like viem and ethers is recommended here. Look under framework guides > TypeScript for them.
// returns a SignTextResult - import { SignTextResult } from 'rrelayer';
let result = await relayerClient.sign.text('sign this message');
```

### API Key Auth

```ts
// config.ts
import { createRelayerClient, TransactionSpeed } from 'rrelayer';

export let relayerClient = createRelayerClient({
  serverUrl: 'http://localhost:8000',
  relayerId: '94afb207-bb47-4392-9229-ba87e4d783cb',
  apiKey: 'YOUR_API_KEY',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  speed: TransactionSpeed.FAST,
});

...

// sign-text.ts
import { relayerClient } from './config';

// Using a framework like viem and ethers is recommended here. Look under framework guides > TypeScript for them.
// returns a SignTextResult - import { SignTextResult } from 'rrelayer';
let result = await relayerClient.sign.text('sign this message');
```

## Signed Text History

:::info
Basic auth can read all relayers signed text history, and API keys can only read the signed text history
with the relayer they have permission to use.
:::

Get the full history of what the relayer has signed via messages.

### Response

```ts
Promise<PagingResult<SignedTextHistory>>;
```

Just so you understand the properties returned

```ts
export interface PagingContext {
  limit: number;
  offset: number;
}

export interface PagingResult<T> {
  items: T[];
  next?: PagingContext;
  previous?: PagingContext;
}

export interface SignedTextHistory {
  relayerId: string;
  message: string;
  signature: string;
  chainId: number;
  signedAt: Date;
}

type SignedTextHistoryResponse = PagingResult<SignedTextHistory>;
```

### Basic Auth

```ts
// config.ts
import { createClient, TransactionSpeed } from 'rrelayer';
import * as dotenv from "dotenv";
dotenv.config();

const client = createClient({
  serverUrl: 'http://localhost:8000',
  auth: {
    username: process.env.RRELAYER_AUTH_USERNAME!,
    password: process.env.RRELAYER_AUTH_PASSWORD!,
  },
});

export const relayerClient = await client.getRelayerClient(
  // The relayer id you want to connect to
  '94afb207-bb47-4392-9229-ba87e4d783cb',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  TransactionSpeed.FAST
);

...

// signed-text-history.ts
import { relayerClient } from './config';

// returns -> PagingResult<SignedTextHistory>
let signedTextHistory = await relayerClient.sign.textHistory({
  limit: 100,
  offset: 0,
});
```

### API Key Auth

```ts
// config.ts
import { createRelayerClient, TransactionSpeed } from 'rrelayer';

export let relayerClient = createRelayerClient({
  serverUrl: 'http://localhost:8000',
  relayerId: '94afb207-bb47-4392-9229-ba87e4d783cb',
  apiKey: 'YOUR_API_KEY',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  speed: TransactionSpeed.FAST,
});

...

// signed-text-history.ts
import { relayerClient } from './config';

// returns -> PagingResult<SignedTextHistory>
let signedTextHistory = await relayerClient.sign.textHistory({
  limit: 100,
  offset: 0,
});
```

## Sign Typed Data

:::info
Basic auth can sign typed data with all relayers, and API keys can only sign typed data with the relayer
they have permission to use.
:::

Sign typed data with the relayer.

### Response

```ts
Promise<SignTypedDataResult>;
```

Just so you understand the properties returned

```ts
export interface SignTypedDataResult {
  signature: string;
}
```

### Basic Auth

```ts
// config.ts
import { createClient, TransactionSpeed } from 'rrelayer';
import * as dotenv from "dotenv";
dotenv.config();

const client = createClient({
  serverUrl: 'http://localhost:8000',
  auth: {
    username: process.env.RRELAYER_AUTH_USERNAME!,
    password: process.env.RRELAYER_AUTH_PASSWORD!,
  },
});

export const relayerClient = await client.getRelayerClient(
  // The relayer id you want to connect to
  '94afb207-bb47-4392-9229-ba87e4d783cb',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  TransactionSpeed.FAST
);

...

// sign-typed-data.ts
import { relayerClient } from './config';

const domain = {
  name: 'Test App',
  version: '1',
  chainId: 31337,
  verifyingContract:
    '0x1234567890123456789012345678901234567890' as `0x${string}`,
};

const types = {
  Person: [
    { name: 'name', type: 'string' },
    { name: 'wallet', type: 'address' },
  ],
};

const value = {
  name: 'Alice',
  wallet: await relayerClient.address(),
};

const typedData = {
  domain,
  types,
  primaryType: 'Person' as const,
  message: value,
};

// Using a framework like viem and ethers is recommended here. Look under framework guides > TypeScript for them.
// returns a SignTypedDataResult - import { SignTypedDataResult } from 'rrelayer';
let result = await relayerClient.sign.typedData(typedData);
```

### API Key Auth

```ts
// config.ts
import { createRelayerClient, TransactionSpeed } from 'rrelayer';

export let relayerClient = createRelayerClient({
  serverUrl: 'http://localhost:8000',
  relayerId: '94afb207-bb47-4392-9229-ba87e4d783cb',
  apiKey: 'YOUR_API_KEY',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  speed: TransactionSpeed.FAST,
});

...

// sign-typed-data.ts
import { relayerClient } from './config';

const domain = {
  name: 'Test App',
  version: '1',
  chainId: 31337,
  verifyingContract:
    '0x1234567890123456789012345678901234567890' as `0x${string}`,
};

const types = {
  Person: [
    { name: 'name', type: 'string' },
    { name: 'wallet', type: 'address' },
  ],
};

const value = {
  name: 'Alice',
  wallet: await relayerClient.address(),
};

const typedData = {
  domain,
  types,
  primaryType: 'Person' as const,
  message: value,
};

// Using a framework like viem and ethers is recommended here. Look under framework guides > TypeScript for them.
// returns a SignTypedDataResult - import { SignTypedDataResult } from 'rrelayer';
let result = await relayerClient.sign.typedData(typedData);
```

## Signed Typed Data History

:::info
Basic auth can read all relayers signed typed data history, and API keys can only read the signed typed data history
with the relayer they have permission to use.
:::

Get the full history of what the relayer has signed via typed data.

### Response

```ts
Promise<PagingResult<SignedTypedDataHistory>>;
```

Just so you understand the properties returned

```ts
export interface PagingContext {
  limit: number;
  offset: number;
}

export interface PagingResult<T> {
  items: T[];
  next?: PagingContext;
  previous?: PagingContext;
}

export interface SignedTypedDataHistory {
  relayerId: string;
  domainData: unknown;
  messageData: unknown;
  primaryType: string;
  signature: string;
  chainId: number;
  signedAt: Date;
}

type SignedTypedDataHistoryResponse = PagingResult<SignedTypedDataHistory>;
```

### Basic Auth

```ts
// config.ts
import { createClient, TransactionSpeed } from 'rrelayer';
import * as dotenv from "dotenv";
dotenv.config();

const client = createClient({
  serverUrl: 'http://localhost:8000',
  auth: {
    username: process.env.RRELAYER_AUTH_USERNAME!,
    password: process.env.RRELAYER_AUTH_PASSWORD!,
  },
});

export const relayerClient = await client.getRelayerClient(
  // The relayer id you want to connect to
  '94afb207-bb47-4392-9229-ba87e4d783cb',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  TransactionSpeed.FAST
);

...

// signed-typed-data-history.ts
import { relayerClient } from './config';

// returns -> PagingResult<SignedTypedDataHistory>
let signedTypedDataHistory = await relayerClient.sign.typedDataHistory({
  limit: 100,
  offset: 0,
});
```

### API Key Auth

```ts
// config.ts
import { createRelayerClient, TransactionSpeed } from 'rrelayer';

export let relayerClient = createRelayerClient({
  serverUrl: 'http://localhost:8000',
  relayerId: '94afb207-bb47-4392-9229-ba87e4d783cb',
  apiKey: 'YOUR_API_KEY',
  // This is optional it defaults to fast and is a fallback
  // You can override this with the transaction request
  speed: TransactionSpeed.FAST,
});

...

// signed-typed-data-history.ts
import { relayerClient } from './config';

// returns -> PagingResult<SignedTypedDataHistory>
let signedTypedDataHistory = await relayerClient.sign.typedDataHistory({
  limit: 100,
  offset: 0,
});
```
