# Google Cloud Secret Manager

Google Cloud Secret Manager is a fully managed service for storing, managing, and accessing sensitive data like API keys, passwords,
certificates, and other secrets. It provides automatic encryption at rest and in transit, integrates seamlessly with Google Cloud services,
supports secret versioning, and offers fine-grained IAM controls. The service includes audit logging through Cloud Audit Logs,
regional and global secret storage options, and programmatic access through client libraries. Unlike AWS Secrets Manager, it doesn't include
built-in automatic rotation but focuses on secure storage and access control.

You can read more about GCP secret manager [here](https://cloud.google.com/security/products/secret-manager).

:::info
This guide will just talk about how you config the signing provider and not go into depth of the setup on the GCP portal
:::

## Usage

To enable GCP secret manager you need to add the `id`, `key`, and `region` to the YAML under the `gcp_secret_manager` key.

:::info
GCP secret manager is storing the mnemonic you are using for rrelayer.
:::

### Fields

#### id

This is the id of the GCP secret key

```yaml [rrelayer.yaml]
name: first-rrelayer
description: "my first rrelayer"
api_config:
  port: 3000
  authentication_username: ${RRELAYER_AUTH_USERNAME}
  authentication_password: ${RRELAYER_AUTH_PASSWORD}
signing_provider: // [!code focus]
  gcp_secret_manager:  // [!code focus]
    id: "testing-josh-relayer" // [!code focus]
```

#### key

In GCP secret you set objects and it returns the JSON. The `key` is the property you have set for mnemonic on

```yaml [rrelayer.yaml]
name: first-rrelayer
description: "my first rrelayer"
api_config:
  port: 3000
  authentication_username: ${RRELAYER_AUTH_USERNAME}
  authentication_password: ${RRELAYER_AUTH_PASSWORD}
signing_provider: // [!code focus]
  gcp_secret_manager:  // [!code focus]
    id: "testing-josh-relayer"
    key: "seed" // [!code focus]
```

#### service_account_key_path

This is pointing to your service account json to allow authentication to happen

```yaml [rrelayer.yaml]
name: first-rrelayer
description: "my first rrelayer"
api_config:
  port: 3000
  authentication_username: ${RRELAYER_AUTH_USERNAME}
  authentication_password: ${RRELAYER_AUTH_PASSWORD}
signing_provider: // [!code focus]
  gcp_secret_manager:  // [!code focus]
    id: "testing-josh-relayer"
    key: "seed"
    service_account_key_path: "./gcp-service-account.json" // [!code focus]
```

:::warning
Your user must have the required roles assigned in GCP to this user else it will not work and
rrelayer will throw errors to tell you this.
:::
